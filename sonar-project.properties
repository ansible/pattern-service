# SonarCloud project configuration for the pattern service
# Complete documentation: https://docs.sonarqube.org/latest/analysis/analysis-parameters/

# =============================================================================
# PROJECT IDENTIFICATION (REQUIRED)
# =============================================================================

# Required project identifier and organization
sonar.projectKey=ansible_pattern-service
sonar.organization=ansible

# Project metadata
sonar.projectName=pattern-service

# =============================================================================
# SOURCE AND TEST CONFIGURATION
# =============================================================================

# Source directories to analyze
sonar.sources=.

# Test directories
sonar.tests=core/tests,pattern_service/tests

# Test file patterns
sonar.test.inclusions=**/test_*.py

# Set branch-specific new code definition
#
# This is important to always check against the main branch for new PRs,
# otherwise the PR may fail during backporting, since the old version of the code
# may not respect the minimum requirements for the existing Quality Gate.
sonar.newCode.referenceBranch=main

# =============================================================================
# REPORTS AND COVERAGE
# =============================================================================

# Test coverage reports (paths relative to project root)
sonar.python.coverage.reportPaths=coverage.xml

# =============================================================================
# EXCLUSIONS - FILES AND DIRECTORIES TO IGNORE
# =============================================================================

# General exclusions - files and directories to ignore from analysis
# sonar.exclusions=

# Files to exclude from test coverage calculations
sonar.coverage.exclusions=\
    **/tests/**,\
    **/migrations/**

# Ignore code duplication in migrations and tests
sonar.cpd.exclusions=\
    **/migrations/**,\
    **/tests/**
